import{transformWithEsbuild as Br}from"vite";import Pr from"path";import{normalizePath as ze}from"vite";import x from"path";import{normalizePath as Dr}from"vite";import Ue from"fast-glob";import p from"path";import jr from"consola";var Fe=typeof global=="object"&&global&&global.Object===Object&&global,A=Fe;var Ne=typeof self=="object"&&self&&self.Object===Object&&self,$e=A||Ne||Function("return this")(),S=$e;var Ge=S.Symbol,s=Ge;var w=Object.prototype,qe=w.hasOwnProperty,Ve=w.toString,i=s?s.toStringTag:void 0;function Ze(e){var t=qe.call(e,i),r=e[i];try{e[i]=void 0;var o=!0}catch(f){}var a=Ve.call(e);return o&&(t?e[i]=r:delete e[i]),a}var T=Ze;var He=Object.prototype,Je=He.toString;function Ke(e){return Je.call(e)}var j=Ke;var Ye="[object Null]",Xe="[object Undefined]",C=s?s.toStringTag:void 0;function Qe(e){return e==null?e===void 0?Xe:Ye:C&&C in Object(e)?T(e):j(e)}var I=Qe;function et(e){return e!=null&&typeof e=="object"}var E=et;var tt="[object Symbol]";function rt(e){return typeof e=="symbol"||E(e)&&I(e)==tt}var L=rt;function ot(e,t){for(var r=-1,o=e==null?0:e.length,a=Array(o);++r<o;)a[r]=t(e[r],r,e);return a}var U=ot;var at=Array.isArray,D=at;var ft=1/0,W=s?s.prototype:void 0,_=W?W.toString:void 0;function M(e){if(typeof e=="string")return e;if(D(e))return U(e,M)+"";if(L(e))return _?_.call(e):"";var t=e+"";return t=="0"&&1/e==-ft?"-0":t}var k=M;function st(e){return e==null?"":k(e)}var u=st;function ut(e,t,r){var o=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var f=Array(a);++o<a;)f[o]=e[o+t];return f}var P=ut;function pt(e,t,r){var o=e.length;return r=r===void 0?o:r,!t&&r>=o?e:P(e,t,r)}var z=pt;var lt="\\ud800-\\udfff",nt="\\u0300-\\u036f",dt="\\ufe20-\\ufe2f",it="\\u20d0-\\u20ff",mt=nt+dt+it,xt="\\ufe0e\\ufe0f",ct="\\u200d",gt=RegExp("["+ct+lt+mt+xt+"]");function ht(e){return gt.test(e)}var c=ht;function bt(e){return e.split("")}var B=bt;var F="\\ud800-\\udfff",yt="\\u0300-\\u036f",vt="\\ufe20-\\ufe2f",Rt="\\u20d0-\\u20ff",Ot=yt+vt+Rt,At="\\ufe0e\\ufe0f",St="["+F+"]",b="["+Ot+"]",y="\\ud83c[\\udffb-\\udfff]",wt="(?:"+b+"|"+y+")",N="[^"+F+"]",$="(?:\\ud83c[\\udde6-\\uddff]){2}",G="[\\ud800-\\udbff][\\udc00-\\udfff]",Tt="\\u200d",q=wt+"?",V="["+At+"]?",jt="(?:"+Tt+"(?:"+[N,$,G].join("|")+")"+V+q+")*",Ct=V+q+jt,It="(?:"+[N+b+"?",b,$,G,St].join("|")+")",Et=RegExp(y+"(?="+y+")|"+It+Ct,"g");function Lt(e){return e.match(Et)||[]}var Z=Lt;function Ut(e){return c(e)?Z(e):B(e)}var H=Ut;function Dt(e){return function(t){t=u(t);var r=c(t)?H(t):void 0,o=r?r[0]:t.charAt(0),a=r?z(r,1).join(""):t.slice(1);return o[e]()+a}}var J=Dt;var Wt=J("toUpperCase"),n=Wt;function _t(e){return n(u(e).toLowerCase())}var K=_t;function Mt(e,t,r,o){var a=-1,f=e==null?0:e.length;for(o&&f&&(r=e[++a]);++a<f;)r=t(r,e[a],a,e);return r}var Y=Mt;function kt(e){return function(t){return e==null?void 0:e[t]}}var X=kt;var Pt={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},zt=X(Pt),Q=zt;var Bt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ft="\\u0300-\\u036f",Nt="\\ufe20-\\ufe2f",$t="\\u20d0-\\u20ff",Gt=Ft+Nt+$t,qt="["+Gt+"]",Vt=RegExp(qt,"g");function Zt(e){return e=u(e),e&&e.replace(Bt,Q).replace(Vt,"")}var ee=Zt;var Ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Jt(e){return e.match(Ht)||[]}var te=Jt;var Kt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Yt(e){return Kt.test(e)}var re=Yt;var ue="\\ud800-\\udfff",Xt="\\u0300-\\u036f",Qt="\\ufe20-\\ufe2f",er="\\u20d0-\\u20ff",tr=Xt+Qt+er,pe="\\u2700-\\u27bf",le="a-z\\xdf-\\xf6\\xf8-\\xff",rr="\\xac\\xb1\\xd7\\xf7",or="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ar="\\u2000-\\u206f",fr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ne="A-Z\\xc0-\\xd6\\xd8-\\xde",sr="\\ufe0e\\ufe0f",de=rr+or+ar+fr,ie="['\u2019]",oe="["+de+"]",ur="["+tr+"]",me="\\d+",pr="["+pe+"]",xe="["+le+"]",ce="[^"+ue+de+me+pe+le+ne+"]",lr="\\ud83c[\\udffb-\\udfff]",nr="(?:"+ur+"|"+lr+")",dr="[^"+ue+"]",ge="(?:\\ud83c[\\udde6-\\uddff]){2}",he="[\\ud800-\\udbff][\\udc00-\\udfff]",d="["+ne+"]",ir="\\u200d",ae="(?:"+xe+"|"+ce+")",mr="(?:"+d+"|"+ce+")",fe="(?:"+ie+"(?:d|ll|m|re|s|t|ve))?",se="(?:"+ie+"(?:D|LL|M|RE|S|T|VE))?",be=nr+"?",ye="["+sr+"]?",xr="(?:"+ir+"(?:"+[dr,ge,he].join("|")+")"+ye+be+")*",cr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",gr="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",hr=ye+be+xr,br="(?:"+[pr,ge,he].join("|")+")"+hr,yr=RegExp([d+"?"+xe+"+"+fe+"(?="+[oe,d,"$"].join("|")+")",mr+"+"+se+"(?="+[oe,d+ae,"$"].join("|")+")",d+"?"+ae+"+"+fe,d+"+"+se,gr,cr,me,br].join("|"),"g");function vr(e){return e.match(yr)||[]}var ve=vr;function Rr(e,t,r){return e=u(e),t=r?void 0:t,t===void 0?re(e)?ve(e):te(e):e.match(t)||[]}var Re=Rr;var Or="['\u2019]",Ar=RegExp(Or,"g");function Sr(e){return function(t){return Y(Re(ee(t).replace(Ar,"")),e,"")}}var Oe=Sr;var wr=Oe(function(e,t,r){return t=t.toLowerCase(),e+(r?K(t):t)}),g=wr;var Ae="vite-plugin-next-react-router";var v="*",Se=["tsx","ts","jsx","js"],we="src/pages",m="virtual:routes";var je=(e,...t)=>{process.env.DEBUG===Ae&&jr.info(e,...t)};function Cr(e){return/^\[\.{3}/.test(e)}function R(e){return/^\[(.+)\]$/.test(e)}function Ir(e){return e==="index"}function Er(e){return Cr(e)?v:Ir(e)?"/":R(e)?Ce(e):e}function Ce(e){return e.replace(/^\[(.+)\]$/,(t,r)=>`:${r}`)}function Lr(e){return e.split("/").map(t=>R(t)?Ce(t):t).join("/")}function Ie(e){let{dir:t,name:r}=p.parse(e),o=Er(r);return o===v?o:p.resolve(p.join("/",Lr(t),o))}function Te(e){return p.resolve(e).split("/").filter(Boolean).length}function Ur(e,t){let r=Te(e)-Te(t);return r!==0?r:e.localeCompare(t)}function Ee(e){return[...e].sort(Ur)}function Le(e){let t=e.split(p.sep),r=p.extname(e),o=p.basename(e,r);return t[t.length-1]=o,t.reduce((f,l)=>R(l)?f+n(g(l.replace(/^\[(.+)\]$/,"$1"))):f+n(g(l)),"")}function O(e){return e.replace(p.extname(e),"")}function De(e){return`${e.layout?e.layout:"_"}.{${e.extensions.join()}}`}function We(e){let t=Wr(e);return _r(t)}function _e(e,t){var o,a,f;return{root:t!=null?t:Dr(process.cwd()),pageDir:(o=e==null?void 0:e.pageDir)!=null?o:we,extensions:(a=e==null?void 0:e.extensions)!=null?a:Se,layout:(f=e==null?void 0:e.layout)!=null?f:"_layout"}}function Wr(e){let{root:t,extensions:r,pageDir:o}=e,a=x.resolve(t,o);return Ue.sync([`**/*.{${r.join()}}`,`!${De(e)}`],{onlyFiles:!0,cwd:a})}function _r(e){let t=new Map;return e.forEach(r=>{let o=Ie(r);t.set(o,r)}),t}function Me(e,t){return Ee([...e.keys()]).map(o=>{let a=e.get(o),f=x.resolve(t.pageDir,a),l={route:o,path:f,name:Le(a)};return x.basename(a,x.extname(a))==="index"&&(l.index=!0),l})}function ke(e){let t=Ue.sync(De(e),{onlyFiles:!0,cwd:e.pageDir});if(t.length===1){let r=t[0];return{path:x.resolve(e.pageDir,t[0]),name:"GlobalLayout",route:r}}else if(t.length>1)throw new Error("Multiple _layout files found");return null}var Pe=({layoutImport:e,routes:t})=>`
import React from 'react';
import { createRoot } from "react-dom/client";
import { createBrowserRouter, RouterProvider } from "react-router-dom";
${e}

const router = createBrowserRouter([${t}])

createRoot(document.getElementById("root")).render(
  <RouterProvider router={router} />
);
`;var Mr=e=>{let t=ke(e),r=t?`import ${t.name} from '${ze(O(t.path))}'`:"import { Outlet } from 'react-router-dom';",o=t?t.name:"Outlet";return{imports:r,element:o}},kr=(e,t)=>{let r=e.map(o=>{var a;return`{
        path: '${o.route}',
        async lazy() {
          const c = await import('${ze(O(o.path))}');
          return { Component: c.default }
        },
        index: ${(a=o.index)!=null?a:!1}
      },
`}).join(" ").trim();return`{
    path: '/',
    element: React.createElement(${t}, null),
    children: [${r}]
  }`};function Be(e,t){let{imports:r,element:o}=Mr(t);return Pe({layoutImport:r,layoutElement:o,routes:kr(e,o)})}function zr(e,t){return e.startsWith(Pr.resolve(t.pageDir))&&t.extensions.some(r=>e.endsWith(r))}var h=class{constructor(t){this._pages=new Map;this._server=null;this.root=".";this._userOptions=t}resolveOptions(){return this._resolvedOptions=_e(this._userOptions,this.root),this._resolvedOptions}search(){return this._resolvedOptions||this.resolveOptions(),this._pages=We(this._resolvedOptions),je("pages: ",this._pages),this._pages}configureServer(t){this._server=t,this._server.watcher.on("unlink",r=>this.invalidateAndRegenerateRoutes(r)),this._server.watcher.on("add",r=>this.invalidateAndRegenerateRoutes(r))}invalidateAndRegenerateRoutes(t){zr(t,this._resolvedOptions)&&(this._pages.clear(),this.generateRoutesModuleCode())}generateRoutesModuleCode(){if(this._pages.size===0)return"";let t=Me(this._pages,this._resolvedOptions);return Be(t,this._resolvedOptions)}};function Fr(e){let t=new h(e);return{name:"vite-plugin-next-router",enforce:"pre",configureServer(r){t.configureServer(r)},async configResolved({root:r}){t.root=r,t.resolveOptions(),t.search()},resolveId(r){if(r==="/"+m)return m},async load(r){if(r===m)return await Br(t.generateRoutesModuleCode(),"routes.jsx",{jsx:"transform",loader:"jsx"})},transformIndexHtml:{enforce:"pre",transform:()=>[{tag:"script",attrs:{type:"module"},children:`import "/${m}"`,injectTo:"body"}]}}}var Da=Fr;export{Da as default};
/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
